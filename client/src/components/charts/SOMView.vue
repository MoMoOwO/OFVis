<template>
  <div class="som-container">
    <v-chart class="martix-container" :options="matrixOpt"></v-chart>
    <el-table
      :data="tableData"
      height="385"
      border
      :row-class-name="tableRowClassName"
      :header-row-style="{
      'background-color': 'red'
    }"
    >
      <el-table-column prop="id" label="ID"></el-table-column>
      <el-table-column prop="MI" label="Moran's I"></el-table-column>
      <el-table-column prop="Mo" label="Mode"></el-table-column>
      <el-table-column prop="Qd" label="Qd"></el-table-column>
      <el-table-column prop="Sk" label="Skewness"></el-table-column>
      <el-table-column prop="EK" label="Ex_Kurtosis"></el-table-column>
      <el-table-column prop="ClusterId" label="ClusterId"></el-table-column>
    </el-table>
  </div>
</template>

<script>
// 按需导入 Echarts 组件
import 'echarts/theme/infographic.js'
import ECharts from 'vue-echarts'
import 'echarts/lib/chart/heatmap'
import 'echarts/lib/component/tooltip'
import 'echarts/lib/component/legend'

export default {
	data() {
		const resData = [
			[
				0,
				0,
				0,
				[
					0.21509953949267824,
					0.03777484128092585,
					0.02079612093530457,
					1.1820932734353893,
					1.7786954772423176
				],
				'MI>0,Mo>=MoAvg,Qd<QdAvg,Sk>0,EK>0',
				0
			],
			[
				0,
				1,
				1,
				[
					0.2183716560898661,
					0.03533943546840844,
					0.01598001673329608,
					1.2277554073630725,
					1.5087734941746918
				],
				'MI>0,Mo>=MoAvg,Qd<QdAvg,Sk>0,EK>0',
				0
			],
			[
				0,
				2,
				2,
				[
					0.20529287525628695,
					0.028853840077487505,
					0.011084733457666956,
					1.2277657855262054,
					1.8761193536950462
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				0,
				3,
				3,
				[
					0.19715528407195998,
					0.023832258074104332,
					0.008693929924046209,
					1.2003651814479273,
					2.268568133271109
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				0,
				4,
				4,
				[
					0.17992657771801698,
					0.023484916095932586,
					0.011950365383423332,
					1.1306519896875924,
					2.311543455427233
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				0,
				5,
				5,
				[
					0.17684926458624176,
					0.027431730869427406,
					0.01784922754214225,
					1.1323502054662373,
					2.3471760474096874
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				0,
				6,
				6,
				[
					0.19427095056292804,
					0.03605606991952877,
					0.022821418434752563,
					1.15987291427027,
					2.178192020690644
				],
				'MI>0,Mo>=MoAvg,Qd<QdAvg,Sk>0,EK>0',
				0
			],
			[
				1,
				0,
				7,
				[
					0.19009684147659806,
					0.030450684446652432,
					0.016501790898183915,
					1.19623965163631,
					1.9454185458475117
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				1,
				1,
				8,
				[
					0.20359051283483448,
					0.029940497201384916,
					0.01369932961145031,
					1.2458082840029694,
					1.6619557433077838
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				1,
				2,
				9,
				[
					0.17789544942112367,
					0.024892928157413886,
					0.01045713170287642,
					1.2445387987201806,
					2.1151699370301786
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				1,
				3,
				10,
				[
					0.1719072793154501,
					0.021601890475173843,
					0.00799917359246971,
					1.2221040787310533,
					2.8380266641212604
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				1,
				4,
				11,
				[
					0.1577030739145771,
					0.01857462378517433,
					0.008090850525785122,
					1.1929184720142763,
					3.268753684387755
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				1,
				5,
				12,
				[
					0.1537147328200986,
					0.02048427865175073,
					0.013040235554142996,
					1.193564524166043,
					3.228944774981712
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				1,
				6,
				13,
				[
					0.17820861400488391,
					0.027767411332577693,
					0.017640880306679093,
					1.1913136312689072,
					2.414772195719741
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				2,
				0,
				14,
				[
					0.12309333791706918,
					0.02169648754286433,
					0.015525990383496316,
					1.1933193505607285,
					1.874652051385842
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				2,
				1,
				15,
				[
					0.11882514901995372,
					0.0208286971951619,
					0.01251196342336251,
					1.1686797183320103,
					1.85701784202115
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				2,
				2,
				16,
				[
					0.12122768720197369,
					0.020445156449606917,
					0.008274822785415557,
					1.1751882102295501,
					2.472770003868128
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				2,
				3,
				17,
				[
					0.12581543372911083,
					0.01936968944997485,
					0.006002956701514236,
					1.179291864489387,
					3.1601922444629347
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				2,
				4,
				18,
				[
					0.1296441311251068,
					0.019546089601014317,
					0.007310410262284437,
					1.2011808425306554,
					3.5147523730836414
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				2,
				5,
				19,
				[
					0.14806882563463275,
					0.017703887680233742,
					0.012579447022238226,
					1.2436634750122084,
					3.198019851443631
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				2,
				6,
				20,
				[
					0.13607969157965397,
					0.019016524499159786,
					0.01775057319031447,
					1.212940230842023,
					2.3352124019608604
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				3,
				0,
				21,
				[
					0.09631046335305084,
					0.023409254626806573,
					0.01864223038004483,
					1.145436056567294,
					1.6825525105073116
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				3,
				1,
				22,
				[
					0.09255236554065602,
					0.023133335863737704,
					0.013957371909259574,
					1.1159528043029068,
					1.658495386169712
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				3,
				2,
				23,
				[
					0.0979915519354379,
					0.019629416343692235,
					0.00707153078459011,
					1.1458117524103062,
					2.407137226424239
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				3,
				3,
				24,
				[
					0.10715525947744221,
					0.019839468936802208,
					0.005910245679677886,
					1.1617629060498216,
					2.948661509349395
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				3,
				4,
				25,
				[
					0.11548344331207959,
					0.02117656317705841,
					0.009424753321590372,
					1.1836638903665824,
					3.066957351599782
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				3,
				5,
				26,
				[
					0.13464693677637893,
					0.022021004820746547,
					0.015509352699937919,
					1.210083356546508,
					2.713212356930289
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				3,
				6,
				27,
				[
					0.11744698853129214,
					0.022737364934375632,
					0.021078974566368005,
					1.189039204495015,
					2.0925487994450207
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				4,
				0,
				28,
				[
					0.10082742640183989,
					0.033243258657027326,
					0.022240336915815576,
					1.126788771188236,
					1.4300797300451817
				],
				'MI>0,Mo>=MoAvg,Qd<QdAvg,Sk>0,EK>0',
				0
			],
			[
				4,
				1,
				29,
				[
					0.09368771891180494,
					0.028014510291368335,
					0.014346123274473764,
					1.103652196814874,
					1.500287470734163
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				4,
				2,
				30,
				[
					0.10241066489493408,
					0.024259234757370313,
					0.006679026175547585,
					1.1195107755646536,
					1.9916530478248127
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				4,
				3,
				31,
				[
					0.10901506489395824,
					0.022300304042400347,
					0.005681982688078028,
					1.1325636352081534,
					2.2375236792612765
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				4,
				4,
				32,
				[
					0.11699948955882367,
					0.023824005755691182,
					0.008301127120946345,
					1.1517344331407255,
					2.2462998511488403
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				4,
				5,
				33,
				[
					0.13082551525047623,
					0.03240094846427562,
					0.02458417065417435,
					1.1571526867285076,
					1.7220782525643197
				],
				'MI>0,Mo<MoAvg,Qd>=QdAvg,Sk>0,EK>0',
				2
			],
			[
				4,
				6,
				34,
				[
					0.11125927650767917,
					0.03324492784913319,
					0.026830111494490546,
					1.1551760925044703,
					1.504683594459173
				],
				'MI>0,Mo>=MoAvg,Qd>=QdAvg,Sk>0,EK>0',
				3
			],
			[
				5,
				0,
				35,
				[
					0.1276258312779571,
					0.03922109454116812,
					0.023565986531042468,
					1.1409543480307727,
					1.4436709379321753
				],
				'MI>0,Mo>=MoAvg,Qd<QdAvg,Sk>0,EK>0',
				0
			],
			[
				5,
				1,
				36,
				[
					0.11792230718429558,
					0.03409429487182249,
					0.01441005657509642,
					1.1344038441398105,
					1.5559098140938878
				],
				'MI>0,Mo>=MoAvg,Qd<QdAvg,Sk>0,EK>0',
				0
			],
			[
				5,
				2,
				37,
				[
					0.13414885739876795,
					0.02801692535525502,
					0.007789808805045935,
					1.121131749356322,
					1.5828528510312279
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				5,
				3,
				38,
				[
					0.13592011536467527,
					0.025415233779861563,
					0.005993064134915497,
					1.1253846965914234,
					1.7108791675560224
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				5,
				4,
				39,
				[
					0.1374723290947794,
					0.026358600808980073,
					0.00992094341728778,
					1.132649566141989,
					1.7989070050046563
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				5,
				5,
				40,
				[
					0.1516349914705121,
					0.03508488624040905,
					0.025869809972611926,
					1.12644329301819,
					1.5137621127926675
				],
				'MI>0,Mo>=MoAvg,Qd>=QdAvg,Sk>0,EK>0',
				3
			],
			[
				5,
				6,
				41,
				[
					0.1338001150501596,
					0.040612062496583015,
					0.02982544663852928,
					1.1424552911621029,
					1.3640875620209825
				],
				'MI>0,Mo>=MoAvg,Qd>=QdAvg,Sk>0,EK>0',
				3
			],
			[
				6,
				0,
				42,
				[
					0.17408041089912255,
					0.041450731163300454,
					0.023210301050878027,
					1.1463518037112337,
					1.567762463252059
				],
				'MI>0,Mo>=MoAvg,Qd<QdAvg,Sk>0,EK>0',
				0
			],
			[
				6,
				1,
				43,
				[
					0.19065857826227345,
					0.03762124056391605,
					0.015627644330974133,
					1.194090722107251,
					1.4441275881054476
				],
				'MI>0,Mo>=MoAvg,Qd<QdAvg,Sk>0,EK>0',
				0
			],
			[
				6,
				2,
				44,
				[
					0.17479917122761865,
					0.029760259009960297,
					0.009059884373249677,
					1.1771204967774256,
					1.5420557446873608
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				6,
				3,
				45,
				[
					0.17887452328387174,
					0.026259608239163457,
					0.007969261954150852,
					1.173062192592499,
					1.7282500709673623
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				6,
				4,
				46,
				[
					0.15900668999627968,
					0.02625807383183846,
					0.010501034559160813,
					1.1235127533638392,
					1.8466934066689473
				],
				'MI>0,Mo<MoAvg,Qd<QdAvg,Sk>0,EK>0',
				1
			],
			[
				6,
				5,
				47,
				[
					0.1639458416698432,
					0.03497810573490656,
					0.025233787878399146,
					1.112162461831111,
					1.8589003816297964
				],
				'MI>0,Mo>=MoAvg,Qd>=QdAvg,Sk>0,EK>0',
				3
			],
			[
				6,
				6,
				48,
				[
					0.1811616757198046,
					0.04138984938734826,
					0.02720458891857221,
					1.1497518647054275,
					1.7210738847731497
				],
				'MI>0,Mo>=MoAvg,Qd>=QdAvg,Sk>0,EK>0',
				3
			]
		]
		const colors = [
			'rgb(215, 25, 28)',
			'rgb(253, 174, 97)',
			'rgb(171, 221, 164)',
			'rgb(43, 131, 186)'
		]
		return {
			resData,
			matrixOpt: {
				xAxis: {
					// type: 'category'
					// show: false
				},
				yAxis: {
					// type: 'category'
					// show: false
				},
				grid: {
					left: 35,
					right: 35,
					top: 35,
					bottom: 35
					// containLabel: true
				},
				series: [
					{
						data: resData,
						type: 'heatmap',
						label: {
							show: true
						},
						itemStyle: {
							color: function(params) {
								return colors[params.data[5]]
							},
							borderColor: '#000',
							borderWidth: 1
						}
					}
					// {
					// 	symbolSize: 10,
					// 	type: 'scatter',
					// 	data: [
					// 		[18.073, 19.5, 'rgb(45, 209, 100)'],
					// 		[11.16, 15.788, 'rgb(155, 22, 12)']
					// 	],
					// 	itemStyle: {
					// 		color: function(params) {
					// 			return params.data[2]
					// 		}
					// 	}
					// }
				]
			},
			tableData: []
		}
	},
	methods: {
		// 获取表格数据
		getTableData() {
			this.resData.forEach(item => {
				this.tableData.push({
					id: item[2],
					MI: item[3][0].toFixed(3),
					Mo: item[3][1].toFixed(3),
					Qd: item[3][2].toFixed(3),
					Sk: item[3][3].toFixed(3),
					EK: item[3][4].toFixed(3),
					DESC: item[4],
					ClusterId: item[5]
				})
			})
		},
		// 表格行类名
		tableRowClassName({ row, rowIndex }) {
			console.log(row)
			if (row.ClusterId === 0) {
				return 'cluster-a-row'
			} else if (row.ClusterId === 1) {
				return 'cluster-b-row'
			} else if (row.ClusterId === 2) {
				return 'cluster-c-row'
			} else if (row.ClusterId === 3) {
				return 'cluster-d-row'
			}
			return ''
		}
	},
	created() {
		this.getTableData()
	},
	components: {
		'v-chart': ECharts
	},
	props: {}
}
</script>

<style lang="less" scoped>
.som-container {
	width: 100%;
	height: 395px;
	display: flex;
	.martix-container {
		width: 395px;
	}
	.el-table {
		margin: 5px 5px 5px 0px;
	}
}
</style>
