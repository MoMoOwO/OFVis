<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
    integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
    crossorigin=""></script>
    <script src="../node_modules/chroma-js/chroma.js"></script>
    <script src="../node_modules/echarts/dist/echarts.js"></script>
    <style>
        html,body{
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }

        #mainContainer {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            border: solid 2px #ccc;
            border-radius: 4px;
            height: 100%;
            width: 100%;
            padding: 36px 0 0;
        }

        #headerContainer {
            width: 100%;
            height: 36px;
            margin: -36px 0 0;
            box-sizing: border-box;
            border-bottom: solid 2px #ccc;
            background-color: red;
        }
        #logoContainer {
            height: 36px;
            width: 100px;
            position: relative;
            overflow: hidden;
        }
        #logoContainer > #sysNameDiv {
            font-size: 18px;
            position: absolute;
            left: 25%;
            top: 50%;
            transform: translate(-25%, -50%);
            transition: all ease-out 1s;

            /* 文本不可选中 */
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none; /* Chrome/Safari/Opera */
            -khtml-user-select: none; /* Konqueror */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
        }
        #logoContainer > #sysNameDiv:hover {
            font-size: 20px;
        }
        #logoContainer::after {
            content: "";
            position: absolute;
            left: 82px;
            height: 60px;
            width: 2px;
            transform: translateY(-25%) rotate(45deg);
            background-color: #ccc;
        }
        #logoContainer::before {
            content: "";
            position: absolute;
            top: 34px;
            height: 2px;
            width: 64px;
            background-color: #ccc;
        }

        #articleContainer{
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            /* border: solid 2px #ccc; */
            border-radius: 4px;
            height: 100%;
            width: 100%;
            /* padding: 36px 0 0; */
            display: flex; /* 弹性布局 */
        }
        .container{
            box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);
            box-sizing: border-box;
            margin: 4px;
        }
        .left-container{
            flex: 1;
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
        }
        .center-container{
            width: 480px;
            position: relative;
        }
        .right-container{
            flex: 1;
        }

        #calendar-chart{
            width: 30%;
            height: 100%;
        }

        #radar-chart, #line-chart{
            width: 70%;
            height: 50%;
        }
        #radar-chart{
            /* background-color: red; */
        }
        #line-chart{
            background-color: yellow;
        }


        #dateDiv{
            width: 80px;
            height: 40px;
            text-align: center;
            border-radius: 6px;
            background-color: rgb(248, 248, 248);
            box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);
            position: absolute;
            top: 5px;
            left: 5px;
            z-index: 99999;
        }
        #optionDiv{
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);
            position: absolute;
            top: 270px;
            left: 5px;
            z-index: 99999;
        }
        .legendDiv{
            height: 200px;
            width: 75px;
            padding: 10px 5px;
            background-color: rgb(248, 248, 248);
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);
            font-size: 0;
            box-sizing: border-box;
            position: absolute;
            top: 340px;
            left: 5px;
            z-index: 99999;
        }
        .legend-step{
            display: inline-block;
            height: 0.83%;
            width: 40px;
        }
        .domain{
            position: absolute;
            font-size: 12px;
            /* font-weight: bold; */
            right: 5px;
            transform: translateY(-50%);
        }
        .domain-q0{
            top: 185px;
        }
        .domain-q1{
            top: 145px;
        }
        .domain-q2{
            top: 50%;
        }
        .domain-q3{
            top: 55px;
        }
        .domain-q4{
            top: 10px;
        }
        .mapContainer{
            width: 95%;
            height: 80%;
            margin: 1px auto;
            position: absolute;
        }

        .gradDiv{
            width: 400px;
            height: 400px;
            background-color: red;
            position: relative;
        }
        .fatherDiv{
            width: 200px;
            height: 200px;
            background-color: green;
            position: absolute;
            left: 50px;
            top: 50px;
        }
        .childDiv{
            width: 50px;
            height: 50px;
            background-color: blue;
            position: absolute;
            left: 20px;
            top: 20px;
        }
    </style>
</head>
<body>
    <div id="mainContainer">
        <header id="headerContainer">
            <div id="logoContainer">
                <div id="sysNameDiv">OF-Vis</div>
            </div>
        </header>
        <article id="articleContainer">
            <div class="container left-container">
                <div id="calendar-chart"></div>
                <div id="radar-chart"></div>
                <div id="line-chart"></div>
            </div>
            <div class="container center-container">
                <div class="legendDiv">
                    <span class="domain domain-q0">0.00</span>
                    <span class="domain domain-q1">1.12</span>
                    <span class="domain domain-q2">2.23</span>
                    <span class="domain domain-q3">3.43</span>
                    <span class="domain domain-q4">4.45</span>
                    <span class="legend-step" style="background-color: rgb(215, 25, 28);"></span>
                    <span class="legend-step" style="background-color: rgb(216, 29, 30);"></span>
                    <span class="legend-step" style="background-color: rgb(217, 32, 31);"></span>
                    <span class="legend-step" style="background-color: rgb(218, 36, 33);"></span>
                    <span class="legend-step" style="background-color: rgb(219, 40, 35);"></span>
                    <span class="legend-step" style="background-color: rgb(220, 44, 37);"></span>
                    <span class="legend-step" style="background-color: rgb(221, 47, 38);"></span>
                    <span class="legend-step" style="background-color: rgb(222, 51, 40);"></span>
                    <span class="legend-step" style="background-color: rgb(223, 55, 42);"></span>
                    <span class="legend-step" style="background-color: rgb(224, 59, 44);"></span>
                    <span class="legend-step" style="background-color: rgb(225, 62, 45);"></span>
                    <span class="legend-step" style="background-color: rgb(225, 66, 47);"></span>
                    <span class="legend-step" style="background-color: rgb(226, 70, 49);"></span>
                    <span class="legend-step" style="background-color: rgb(227, 73, 50);"></span>
                    <span class="legend-step" style="background-color: rgb(228, 77, 52);"></span>
                    <span class="legend-step" style="background-color: rgb(229, 81, 54);"></span>
                    <span class="legend-step" style="background-color: rgb(230, 85, 56);"></span>
                    <span class="legend-step" style="background-color: rgb(231, 88, 57);"></span>
                    <span class="legend-step" style="background-color: rgb(232, 92, 59);"></span>
                    <span class="legend-step" style="background-color: rgb(233, 96, 61);"></span>
                    <span class="legend-step" style="background-color: rgb(234, 100, 63);"></span>
                    <span class="legend-step" style="background-color: rgb(235, 103, 64);"></span>
                    <span class="legend-step" style="background-color: rgb(236, 107, 66);"></span>
                    <span class="legend-step" style="background-color: rgb(237, 111, 68);"></span>
                    <span class="legend-step" style="background-color: rgb(238, 114, 69);"></span>
                    <span class="legend-step" style="background-color: rgb(239, 118, 71);"></span>
                    <span class="legend-step" style="background-color: rgb(240, 122, 73);"></span>
                    <span class="legend-step" style="background-color: rgb(241, 126, 75);"></span>
                    <span class="legend-step" style="background-color: rgb(242, 129, 76);"></span>
                    <span class="legend-step" style="background-color: rgb(243, 133, 78);"></span>
                    <span class="legend-step" style="background-color: rgb(244, 137, 80);"></span>
                    <span class="legend-step" style="background-color: rgb(244, 140, 81);"></span>
                    <span class="legend-step" style="background-color: rgb(245, 144, 83);"></span>
                    <span class="legend-step" style="background-color: rgb(246, 148, 85);"></span>
                    <span class="legend-step" style="background-color: rgb(247, 152, 87);"></span>
                    <span class="legend-step" style="background-color: rgb(248, 155, 88);"></span>
                    <span class="legend-step" style="background-color: rgb(249, 159, 90);"></span>
                    <span class="legend-step" style="background-color: rgb(250, 163, 92);"></span>
                    <span class="legend-step" style="background-color: rgb(251, 167, 94);"></span>
                    <span class="legend-step" style="background-color: rgb(252, 170, 95);"></span>
                    <span class="legend-step" style="background-color: rgb(253, 174, 97);"></span>
                    <span class="legend-step" style="background-color: rgb(251, 175, 99);"></span>
                    <span class="legend-step" style="background-color: rgb(249, 176, 100);"></span>
                    <span class="legend-step" style="background-color: rgb(247, 178, 102);"></span>
                    <span class="legend-step" style="background-color: rgb(245, 179, 104);"></span>
                    <span class="legend-step" style="background-color: rgb(243, 180, 105);"></span>
                    <span class="legend-step" style="background-color: rgb(241, 181, 107);"></span>
                    <span class="legend-step" style="background-color: rgb(239, 182, 109);"></span>
                    <span class="legend-step" style="background-color: rgb(237, 183, 110);"></span>
                    <span class="legend-step" style="background-color: rgb(235, 185, 112);"></span>
                    <span class="legend-step" style="background-color: rgb(232, 186, 114);"></span>
                    <span class="legend-step" style="background-color: rgb(230, 187, 115);"></span>
                    <span class="legend-step" style="background-color: rgb(228, 188, 117);"></span>
                    <span class="legend-step" style="background-color: rgb(226, 189, 119);"></span>
                    <span class="legend-step" style="background-color: rgb(224, 190, 120);"></span>
                    <span class="legend-step" style="background-color: rgb(222, 192, 122);"></span>
                    <span class="legend-step" style="background-color: rgb(220, 193, 124);"></span>
                    <span class="legend-step" style="background-color: rgb(218, 194, 125);"></span>
                    <span class="legend-step" style="background-color: rgb(216, 195, 127);"></span>
                    <span class="legend-step" style="background-color: rgb(214, 196, 129);"></span>
                    <span class="legend-step" style="background-color: rgb(212, 198, 131);"></span>
                    <span class="legend-step" style="background-color: rgb(210, 199, 132);"></span>
                    <span class="legend-step" style="background-color: rgb(208, 200, 134);"></span>
                    <span class="legend-step" style="background-color: rgb(206, 201, 136);"></span>
                    <span class="legend-step" style="background-color: rgb(204, 202, 137);"></span>
                    <span class="legend-step" style="background-color: rgb(202, 203, 139);"></span>
                    <span class="legend-step" style="background-color: rgb(200, 205, 141);"></span>
                    <span class="legend-step" style="background-color: rgb(198, 206, 142);"></span>
                    <span class="legend-step" style="background-color: rgb(196, 207, 144);"></span>
                    <span class="legend-step" style="background-color: rgb(194, 208, 146);"></span>
                    <span class="legend-step" style="background-color: rgb(191, 209, 147);"></span>
                    <span class="legend-step" style="background-color: rgb(189, 210, 149);"></span>
                    <span class="legend-step" style="background-color: rgb(187, 212, 151);"></span>
                    <span class="legend-step" style="background-color: rgb(185, 213, 152);"></span>
                    <span class="legend-step" style="background-color: rgb(183, 214, 154);"></span>
                    <span class="legend-step" style="background-color: rgb(181, 215, 156);"></span>
                    <span class="legend-step" style="background-color: rgb(179, 216, 157);"></span>
                    <span class="legend-step" style="background-color: rgb(177, 217, 159);"></span>
                    <span class="legend-step" style="background-color: rgb(175, 219, 161);"></span>
                    <span class="legend-step" style="background-color: rgb(173, 220, 162);"></span>
                    <span class="legend-step" style="background-color: rgb(171, 221, 164);"></span>
                    <span class="legend-step" style="background-color: rgb(168, 219, 165);"></span>
                    <span class="legend-step" style="background-color: rgb(165, 216, 165);"></span>
                    <span class="legend-step" style="background-color: rgb(161, 214, 166);"></span>
                    <span class="legend-step" style="background-color: rgb(158, 212, 166);"></span>
                    <span class="legend-step" style="background-color: rgb(155, 210, 167);"></span>
                    <span class="legend-step" style="background-color: rgb(152, 207, 167);"></span>
                    <span class="legend-step" style="background-color: rgb(149, 205, 168);"></span>
                    <span class="legend-step" style="background-color: rgb(145, 203, 168);"></span>
                    <span class="legend-step" style="background-color: rgb(142, 201, 169);"></span>
                    <span class="legend-step" style="background-color: rgb(139, 198, 170);"></span>
                    <span class="legend-step" style="background-color: rgb(136, 196, 170);"></span>
                    <span class="legend-step" style="background-color: rgb(133, 194, 171);"></span>
                    <span class="legend-step" style="background-color: rgb(129, 192, 171);"></span>
                    <span class="legend-step" style="background-color: rgb(126, 189, 172);"></span>
                    <span class="legend-step" style="background-color: rgb(123, 187, 172);"></span>
                    <span class="legend-step" style="background-color: rgb(120, 185, 173);"></span>
                    <span class="legend-step" style="background-color: rgb(117, 183, 173);"></span>
                    <span class="legend-step" style="background-color: rgb(113, 180, 174);"></span>
                    <span class="legend-step" style="background-color: rgb(110, 178, 174);"></span>
                    <span class="legend-step" style="background-color: rgb(107, 176, 175);"></span>
                    <span class="legend-step" style="background-color: rgb(104, 174, 176);"></span>
                    <span class="legend-step" style="background-color: rgb(101, 171, 176);"></span>
                    <span class="legend-step" style="background-color: rgb(97, 169, 177);"></span>
                    <span class="legend-step" style="background-color: rgb(94, 167, 177);"></span>
                    <span class="legend-step" style="background-color: rgb(91, 165, 178);"></span>
                    <span class="legend-step" style="background-color: rgb(88, 162, 178);"></span>
                    <span class="legend-step" style="background-color: rgb(85, 160, 179);"></span>
                    <span class="legend-step" style="background-color: rgb(81, 158, 179);"></span>
                    <span class="legend-step" style="background-color: rgb(78, 156, 180);"></span>
                    <span class="legend-step" style="background-color: rgb(75, 153, 181);"></span>
                    <span class="legend-step" style="background-color: rgb(72, 151, 181);"></span>
                    <span class="legend-step" style="background-color: rgb(69, 149, 182);"></span>
                    <span class="legend-step" style="background-color: rgb(65, 147, 182);"></span>
                    <span class="legend-step" style="background-color: rgb(62, 144, 183);"></span>
                    <span class="legend-step" style="background-color: rgb(59, 142, 183);"></span>
                    <span class="legend-step" style="background-color: rgb(56, 140, 184);"></span>
                    <span class="legend-step" style="background-color: rgb(53, 138, 184);"></span>
                    <span class="legend-step" style="background-color: rgb(49, 135, 185);"></span>
                    <span class="legend-step" style="background-color: rgb(46, 133, 185);"></span>
                </div>
                <div id="dateDiv">
                    Date: <br>
                    20150101
                </div>
                <div id="optionDiv">
                    <input type="checkbox" name="areas" id="isShowAreas">海区划分
                </div>
                <div class="mapContainer"></div>
            </div>
            <div class="container right-container">
                <div class="gradDiv">1
                    <div class="fatherDiv">2
                        <div class="childDiv">3</div>
                    </div>
                </div>
            </div>
        </article>
    </div>
    <script>
        // 日历图
        function getVirtulData(year) {
            year = year || "2017"; // 默认
            var date = + echarts.number.parseDate(year + "-01-01"); // 起始
            var end = + echarts.number.parseDate(+year + 1 + "-01-01"); // 结束
            var dayTime = 3600 * 24 * 1000; // 一天的时间，单位毫秒
            var data = [];
            // 以一天的毫秒数进行累加，遍历每一天，为每一天添加随机数据
            for (var time = date; time < end; time += dayTime) {
                data.push([
                echarts.format.formatTime("yyyy-MM-dd", time), // 日期
                Math.floor(Math.random() * 1000) /// 向下取整
                ]);
            }

            // 返回日历数据
            return data;
        }

        let calendarOption ={
            // title: {
            //   text: "日历图"
            // },
            visualMap: {
                min: 0,
                max: 1000,                
                //calculable: false,  // 可选范围
                orient: 'horizontal',
                color: ["#F03B20", "#FEB24C", "#FFEDA0"],
                left: 'center',
                bottom: '0'
            },
            calendar: {
                orient: "vertical", // 排列方向，默认horizontal
                left: 30,
                right: 10,
                bottom: 50,
                // yearLabel: { // 年份标签边距
                //   margin: 40
                // },
                // monthLabel: { // 月份标签边距
                //   margin: 20
                // },
                dayLabel: {
                    firstDay: 1 // 从周一开始
                },
                height: "auto",
                cellSize: "auto", // 单元格大小，[宽，高]数值，auto
                range: this.datequery ? this.datequery : '2017'  // 设置日历范围，格式：yyyy, yyyy-MM,字符串形式
            },
            tooltip: {
                position: 'top',
                formatter: '{c}'
            },
            series: [
            {
                coordinateSystem: "calendar",
                type: "heatmap",
                calendarIndex: 0, // 日历索引
                // 设置散点大小
                symbolSize: function(val) {
                return val[1] / 60;
                },
                data: getVirtulData("2017")
            }
            ]
        };
        // 初始化图表 renderer指定使用svg渲染
        let calendarChart = echarts.init(
            document.querySelector("#calendar-chart"),
            null,
            { renderer: "svg" }
        );
        calendarChart.setOption(calendarOption);
        // 日期点击点击
        calendarChart.on('click', (params)=> {
            console.log(params.value);
        });


        // 雷达图
        let radarOption = {
            tooltip: {
                target: 'axis',
                formatter: function(p){
                    console.log(p);
                }
            },
            legend: {
                x: 'center',
                data:['2015','2016', '2017']
            },
            radar: {
                // shape: 'circle', // 圆形
                name: { 
                    show: true,
                    textStyle: {
                        color: '#black'
                    }
                },
                silent: false, // 坐标轴是否静态无法交互
                triggerEvent: true, // 坐标轴标签是否响应和触发鼠标事件
                radius: "85%",
                // 雷达每个方向的指标
                indicator: [
                    { text: "Jan", max: 150, 
                        axisLabel:{
                            show: true,
                            formatter: '{value}km²'
                        },
                    },
                    { text: "Feb", max: 150 },
                    { text: "Mar", max: 150 },
                    { text: "Apr", max: 150 },
                    { text: "May", max: 150 },
                    { text: "Jun", max: 150 },
                    { text: "Jul", max: 150 },
                    { text: "Aug", max: 150 },
                    { text: "Sep", max: 150 },
                    { text: "Oct", max: 150 },
                    { text: "Nov", max: 150 },
                    { text: "Dec", max: 150 }
                ]
            },
            series: [{
                type: 'radar',
                // areaStyle: {normal: {}},
                data : [
                    {
                        name: '2015',
                        value: [110, 100, 90, 80, 120, 130, 60, 80, 120, 130, 120, 70]
                    },
                    {
                        name:'2016',
                        value:[105, 96, 89, 110, 90, 95, 59, 50, 116, 73, 57, 89]
                    },
                    {
                        name:'2017',
                        value:[118, 93, 86, 128, 86, 120, 70, 59, 127, 80, 70, 97]
                    }
                ]
            }]
        };
        // 获取雷达图容器
        let radarChart = echarts.init(
            document.querySelector("#radar-chart"),
            null,
            { renderer: "svg" }
        );
        radarChart.setOption(radarOption);
        radarChart.on("mouseover", function(params){
            console.log(params);
        });


        // 地图
        let sst = [[117.025, 22.025, 0.0], [117.075, 22.025, 0.0017], [117.125, 22.025, 0.0042], [117.175, 22.025, 0.0042], [117.225, 22.025, 0.0034], [117.275, 22.025, 0.0037], [117.325, 22.025, 0.0037], [117.375, 22.025, 0.003], [117.425, 22.025, 0.0024], [117.475, 22.025, 0.0026], [117.525, 22.025, 0.0025], [117.575, 22.025, 0.0026], [117.625, 22.025, 0.0037], [117.675, 22.025, 0.0042], [117.725, 22.025, 0.0035], [117.775, 22.025, 0.003], [117.825, 22.025, 0.003], [117.875, 22.025, 0.0053], [117.925, 22.025, 0.0075], [117.975, 22.025, 0.0083], [118.025, 22.025, 0.0093], [118.075, 22.025, 0.009000000000000001], [118.125, 22.025, 0.0082], [118.175, 22.025, 0.0101], [118.225, 22.025, 0.0119], [118.275, 22.025, 0.0142], [118.325, 22.025, 0.0153], [118.375, 22.025, 0.0157], [118.425, 22.025, 0.0157], [118.475, 22.025, 0.0143], [118.525, 22.025, 0.0118], [118.575, 22.025, 0.0095], [118.625, 22.025, 0.0075], [118.675, 22.025, 0.0082], [118.725, 22.025, 0.0082], [118.775, 22.025, 0.0095], [118.825, 22.025, 0.013000000000000001], [118.875, 22.025, 0.0142], [118.925, 22.025, 0.0124], [118.975, 22.025, 0.0098], [119.025, 22.025, 0.0077], [119.075, 22.025, 0.0075], [119.125, 22.025, 0.0079], [119.175, 22.025, 0.0053], [119.225, 22.025, 0.0034], [119.275, 22.025, 0.0025], [119.325, 22.025, 0.0012], [119.375, 22.025, 0.0026], [119.425, 22.025, 0.0037], [119.475, 22.025, 0.003], [119.525, 22.025, 0.0035], [119.575, 22.025, 0.0035], [119.625, 22.025, 0.0035], [119.675, 22.025, 0.003], [119.725, 22.025, 0.003], [119.775, 22.025, 0.0034], [119.825, 22.025, 0.0042], [119.875, 22.025, 0.0058], [119.925, 22.025, 0.0067], [119.975, 22.025, 0.0061], [120.025, 22.025, 0.0061], [120.075, 22.025, 0.0063], [120.125, 22.025, 0.0049], [120.175, 22.025, 0.0045], [120.225, 22.025, 0.0042], [120.275, 22.025, 0.0035], [120.325, 22.025, 0.0042], [120.375, 22.025, 0.0037], [120.425, 22.025, 0.0034], [120.475, 22.025, 0.0026], [120.525, 22.025, 0.0026], [120.575, 22.025, 0.0026], [120.625, 22.025, 0.003], [120.925, 22.025, 0.0067], [120.975, 22.025, 0.0092], [121.025, 22.025, 0.0108], [121.075, 22.025, 0.0117], [121.125, 22.025, 0.0117], [121.175, 22.025, 0.0117], [121.225, 22.025, 0.0125], [121.275, 22.025, 0.0125]];
        let min = 0;
        let max = 0.0125;

        let mymap = L.map(document.querySelector(".mapContainer"), {
            center: [32, 124.1],
            zoomSnap: 0.5, // 开启小数(0.5)缩放级别
            zoomDelta: 0.5, // 每次缩放级别
            zoom: 5.5,
            zoomControl: false,
            //scrollWheelZoom: false,
            doubleClickZoom: false,
            //dragging: false,
            attributionControl: false
            //preferCanvas: true, // 启用canvas
        });
        // 通过给定URL模板和具有选项的对象来实例化一个切片图层
        L.tileLayer(
            "https://api.mapbox.com/styles/v1/momoowo/cjzzc245d0hpc1cnts2lnwtwe/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibW9tb293byIsImEiOiJjanp5enEyenIxbnl6M2JtdjJib3B5cmJrIn0.THgFXKBewGaYauwvYLy5bA#5.0/33.031539/127.253861/0",
            //"http://{s}.tile.osm.org/{z}/{x}/{y}.png",
            { attribution: "OSM" }
        ).addTo(mymap); // 将图层加到地图上

        var legend = L.Control.Legend = L.Control.extend({
            options: {
                position: 'bottomleft' //初始位置
            },
            initialize: function (options) {
                L.Util.extend(this.options, options);
            },
            onAdd: function (map) {
                var options = this.options;
                // div
                this._container = L.DomUtil.create('div', 'legendDiv');
                let colors = chroma.scale(['2B83BA', 'ABDDA4', 'FDAE61', 'D7191C']).domain([0, 1.5]); // 线性颜色数组
                for(let i = 1.5; i >= 0; i -= 0.01){
                    let span = document.createElement("span"); // 创建span子元素
                    span.className = "color-step"; // 添加类名
                    span.style.backgroundColor = colors(i); // 为span元素添加背景色
                    this._container.appendChild(span); // 添加子元素
                }
                
                return this._container;
            },
        });

        L.control.legend = function (options) {
            return new L.Control.Legend(options);
        };

        //L.control.legend({ content: legend }).addTo(mymap);


        let legendColor = chroma.scale(['yellow', 'lightgreen', '008ae5']);
        legendColor.domain([min, max]);
        //document.querySelector("#colorDiv").style.backgroundColor = legendColor(0.06);

        let geoJson = [{
            "properties": {
                "note": "1",
                "distance": "1261715.86 m",
                "drawtype": "polygon",
                "area": "13989975.45 ha"
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [117.5, 41],
                        [117.5, 37],
                        [119.35, 37],
                        [120, 38.5],
                        [122, 38.5],
                        [122, 40],
                        [123, 41],
                        [117.5, 41]
                    ]
                ]
            }
        }, {
            "properties": {
                "note": "2",
                "distance": "1589338.12 m",
                "drawtype": "polygon",
                "area": "13173053.07 ha"
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [122, 40],
                        [126, 40],
                        [126, 38],
                        [127, 38],
                        [127, 36],
                        [124, 36],
                        [124, 38],
                        [122, 38.5],
                        [122, 40]
                    ]
                ]
            }
        }, {
            "properties": {
                "note": "3",
                "distance": "1427578.01 m",
                "drawtype": "polygon",
                "area": "16547105.01 ha"
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [122, 38.5],
                        [120, 38.5],
                        [118.5, 35],
                        [124, 35],
                        [124, 38],
                        [122, 38.5]
                    ]
                ]
            }
        }, {
            "properties": {
                "note": "4",
                "distance": "2102855.58 m",
                "drawtype": "polygon",
                "area": "24664170.83 ha"
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [123, 35],
                        [124, 35],
                        [124, 36],
                        [129.2, 36],
                        [132, 35],
                        [132, 33],
                        [125.7, 33],
                        [123, 34.5],
                        [123, 35]
                    ]
                ]
            }
        }, {
            "properties": {
                "note": "5",
                "distance": "1564309.16 m",
                "drawtype": "polygon",
                "area": "23646686.96 ha"
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [118.5, 35],
                        [118.5, 30],
                        [122.4, 30],
                        [123, 31],
                        [123, 31.5],
                        [123.8, 32.2],
                        [123.8, 32.8],
                        [123, 33.4],
                        [123, 35],
                        [118.5, 35]
                    ]
                ]
            }
        }, {
            "properties": {
                "note": "6",
                "distance": "749468.50 m",
                "drawtype": "polygon",
                "area": "6898472.84 ha"
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [131.3, 33],
                        [131.3, 31],
                        [127.7, 31],
                        [127.7, 33],
                        [131.3, 33]
                    ]
                ]
            }
        }, {
            "properties": {
                "note": "7",
                "distance": "2132171.42 m",
                "drawtype": "polygon",
                "area": "38846898.80 ha"
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [117, 30],
                        [116.3, 23.1],
                        [118, 23.1],
                        [120.3, 24],
                        [123, 27.6],
                        [123.3, 29.5],
                        [123, 31],
                        [122.4, 30],
                        [117, 30]
                    ]
                ]
            }
        }, {
            "properties": {
                "note": "8",
                "distance": "2745476.04 m",
                "drawtype": "polygon",
                "area": "37948278.83 ha"
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [110, 18.5],
                        [110, 23.1],
                        [118, 23.1],
                        [120.3, 24],
                        [120.3, 22],
                        [112, 18.5],
                        [110, 18.5]
                    ]
                ]
            }
        }, {
            "properties": {
                "note": "9",
                "distance": "1581840.00 m",
                "drawtype": "polygon",
                "area": "20605014.13 ha"
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [120.3, 24],
                        [122, 25],
                        [124, 25],
                        [124, 19.5],
                        [122, 19.5],
                        [120.3, 22],
                        [120.3, 24]
                    ]
                ]
            }
        }, {
            "properties": {
                "note": "10",
                "distance": "2564505.97 m",
                "drawtype": "polygon",
                "area": "27284892.08 ha"
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [127.7, 31],
                        [126, 29],
                        [123.062, 28],
                        [123, 27.6],
                        [120.3, 24],
                        [122, 25],
                        [126, 25],
                        [131.3, 31],
                        [127.7, 31]
                    ]
                ]
            }
        }, {
            "properties": {
                "note": "11",
                "distance": "1845824.01 m",
                "drawtype": "polygon",
                "area": "21646118.32 ha"
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [123, 34.5],
                        [123, 33.4],
                        [123.8, 32.8],
                        [123.8, 32.2],
                        [123, 31.5],
                        [123, 31],
                        [123.3, 29.5],
                        [123.062, 28],
                        [126, 29],
                        [127.7, 31],
                        [127.7, 33],
                        [125.7, 33],
                        [123, 34.5]
                    ]
                ]
            }
        }, {
            "properties": {
                "note": "12",
                "distance": "",
                "drawtype": "polygon",
                "area": ""
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [131.3, 31],
                        [126, 25],
                        [124, 25],
                        [124, 19.5],
                        [131.3 ,19.5],
                        [131.3, 31]
                    ]
                ]
            }
        }, {
            "properties": {
                "note": "13",
                "distance": "",
                "drawtype": "polygon",
                "area": ""
            },
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [132, 35],
                        [129.2, 36],
                        [127, 36],
                        [127, 38],
                        [126, 38],
                        [126, 40],
                        [122, 40],
                        [123, 41],
                        [132, 41],
                        [132, 35]
                    ]
                ]
            }
        }];

        var myStyle = {
            "color": "#00f",
            "weight": 3,
            "opacity": 0.5,

        };
        //渲染方法
        var layerGeo = L.geoJSON(geoJson, {
            style:myStyle,
            filter: function(feature, layer) {
                return false; //true or false是否显示
            }
        }).addTo(mymap);
        document.querySelector("#isShowAreas").onclick = () => {
            //console.log(document.querySelector("#isShowAreas").checked);
            layerGeo.options.filter = (feature, layer) => {
                return document.querySelector("#isShowAreas").checked;
            }
        };
        console.log(layerGeo);
        //添加点击事件
        layerGeo.on('click',function(e){
            console.log(e.layer.feature.properties.note) //当前点击的物体的名称
        });

        function getRect(coords){
            return [[coords[1] - 0.05, coords[0] - 0.05],
                    [coords[1] - 0.05, coords[0] + 0.05],
                    [coords[1] + 0.05, coords[0] + 0.05],
                    [coords[1] + 0.05, coords[0] - 0.05]
                    ]
        }

        for(let i = 0; i < sst.length; i++){
            let react = getRect([sst[i][0], sst[i][1]]);
            L.polygon(react, {fillColor: legendColor(sst[i][2]), weight: 0, fillOpacity: 1}).addTo(mymap);
        }


    </script>
</body>
</html>